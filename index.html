<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KLLOVR WEAR</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        :root {
            --primary-color: #001f3f;
            /* Navy Blue */
            --secondary-color: #ffffff;
            /* White */
            --accent-color: #39CCCC;
            /* Teal/Light Blue accent for buttons/hovers if needed */
            --text-color: #333;
            --light-gray: #f4f4f4;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f4f7f6;
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Modern Blue Background */
        .global-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(135deg, #000428, #004e92); /* "Frost" or "Midnight" Blue Gradient */
        }

        /* Subtle mesh/glow effect */
        .global-bg::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(57, 204, 204, 0.1), transparent 50%);
            animation: rotate 30s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* typography */
        h1,
        h2,
        h3 {
            color: var(--primary-color);
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        /* Header */
        header {
            background-color: rgba(0, 31, 63, 0.95);
            color: var(--secondary-color);
            padding: 1rem 5%;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 20px;
        }

        nav ul li a {
            color: var(--secondary-color);
            transition: color 0.3s;
        }

        nav ul li a:hover {
            color: var(--accent-color);
        }

        /* Hero Section */
        .hero {
            height: 80vh; 
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: transparent;
        }

        /* Float animation for the global circle */
        @keyframes float-y {
            0%, 100% { transform: translate(-50%, -50%) translateY(0); }
            50% { transform: translate(-50%, -50%) translateY(-20px); }
        }

        @keyframes pulse-glow {
            0% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 20px 50px rgba(0,31,63,0.3); }
            100% { transform: translate(-50%, -50%) scale(1.05); box-shadow: 0 40px 80px rgba(0,31,63,0.5); }
        }

        @keyframes spin-slow {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Entrance Animations */
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .products, .order-section, header {
            animation: fade-in-up 1s ease-out forwards;
        }
        
        .products { animation-delay: 0.2s; opacity: 0; animation-fill-mode: forwards; }
        .order-section { animation-delay: 0.4s; opacity: 0; animation-fill-mode: forwards; }

        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .hero-content {
            z-index: 2;
            position: relative;
            /* Empty content container */
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            color: #ffffff;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            color: #e0e0e0;
        }

        .btn {
            display: inline-block;
            background-color: var(--secondary-color);
            color: var(--primary-color);
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background-color: var(--accent-color);
            color: var(--secondary-color);
            transform: translateY(-2px);
        }

        /* Products Section */
        .products {
            padding: 2rem 5%; /* Reduced from 5rem */
            text-align: center;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            margin: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 2.5rem;
            margin-bottom: 3rem;
            position: relative;
            display: inline-block;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 50%;
            height: 3px;
            background-color: var(--primary-color);
            margin: 10px auto 0;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            text-align: left;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .product-image {
            width: 100%;
            background-color: white;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            color: #777;
            font-size: 3rem;
        }

        /* Placeholder styling for images */
        .product-image img {
            width: 100%;
            height: auto;
            display: block;
        }

        .product-info {
            padding: 20px;
        }

        .product-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .product-price {
            font-size: 1.1rem;
            color: var(--primary-color);
            font-weight: bold;
            margin-bottom: 15px;
        }

        .btn-order {
            width: 100%;
            padding: 10px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .btn-order:hover {
            background-color: #003366;
        }

        /* Order Form Section */
        .order-section {
            padding: 5rem 5%;
            background: transparent; /* Make transparent to show global card style if wrapper used, or style directly */
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            margin: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .order-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--primary-color);
            font-weight: bold;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Footer */
        footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: auto;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: 10px;
            text-align: center;
            max-width: 400px;
        }

        .modal-content i {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .close-btn {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            margin-top: 20px;
            cursor: pointer;
        }

        /* Carousel Styles */
        .carousel-container {
            position: relative;
            width: 100%;
        }
        
        .carousel-slides {
            display: flex;
            width: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .carousel-slides::-webkit-scrollbar {
            display: none;
        }
        
        .carousel-slide {
            flex: 0 0 100%;
            width: 100%;
            scroll-snap-align: start;
        }

        .carousel-slide img {
            width: 100%;
            height: auto;
            display: block;
        }

        .carousel-dots {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: background-color 0.3s;
            border: 1px solid var(--primary-color);
        }

        .dot.active {
            background-color: var(--primary-color);
        }

        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(255, 255, 255, 0.7);
            color: var(--primary-color);
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .carousel-btn:hover {
            background-color: white;
        }

        .carousel-btn.prev {
            left: 10px;
        }

        .carousel-btn.next {
            right: 10px;
        }

        /* Color Selector Styles */
        .color-selector {
            display: inline-flex;
            gap: 8px;
            align-items: center;
        }

        .color-btn {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .color-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        }

        .color-btn.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 1px white, 0 0 0 3px var(--primary-color);
        }

        .product-title-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .color-btn.black {
            background-color: #1a1a1a;
        }

        .color-btn.grey {
            background-color: #b0b0b0;
        }

        .color-btn.blue {
            background-color: #1e40af; /* Professional Royal Blue */
        }

        .color-btn.darkblue {
            background-color: #001f3f; /* Professional Deep Navy */
        }

        .color-btn.white {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
        }

        .color-btn.red {
            background-color: #e74c3c;
        }

        .color-btn.green {
            background-color: #27ae60;
        }

        /* Product Detail Modal */
        .product-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .product-modal-content {
            max-width: 1000px;
            margin: 40px auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            position: relative;
        }

        .close-product-modal {
            position: fixed;
            right: 30px;
            top: 30px;
            font-size: 2rem;
            cursor: pointer;
            color: var(--primary-color);
            z-index: 2100;
            background: white;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .close-product-modal:hover {
            transform: rotate(90deg);
        }

        .modal-product-info h2 {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .modal-product-price {
            font-size: 1.8rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 30px;
        }

        .modal-section-label {
            display: block;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9rem;
            margin-bottom: 15px;
            color: #666;
        }

        .size-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .size-btn {
            padding: 12px 25px;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .size-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .modal-commander-btn {
            width: 100%;
            padding: 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s, background 0.3s;
        }

        .modal-commander-btn:hover {
            background: #003366;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 51, 102, 0.2);
        }

        @media (max-width: 850px) {
            .product-modal-content {
                grid-template-columns: 1fr;
                margin: 0;
                padding-top: 80px;
            }
            .close-product-modal {
                right: 20px;
                top: 20px;
            }
        }

        /* Lightbox for large image viewing */
        #lightbox {
            display: none;
            position: fixed;
            z-index: 3000;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            align-items: center;
            justify-content: center;
            cursor: zoom-out;
        }

        #lightbox img {
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            transition: transform 0.3s ease-out, opacity 0.3s ease-out;
            animation: zoomIn 0.3s ease-out;
        }

        .lightbox-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 3100;
        }

        .lightbox-btn:hover {
            background: rgba(0, 0, 0, 0.6);
            transform: translateY(-50%) scale(1.1);
        }

        .lightbox-btn.prev { left: 15px; }
        .lightbox-btn.next { right: 15px; }

        #lightbox-img {
            cursor: default;
            transition: opacity 0.3s ease;
        }

        @keyframes zoomIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }



        /* Responsive Design */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                padding: 1rem;
            }

            nav ul {
                margin-top: 20px;
                flex-wrap: wrap;
                justify-content: center;
            }

            nav ul li {
                margin: 0 10px 10px 10px;
            }

            .hero-content h1 {
                font-size: 2.5rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .order-container {
                padding: 20px;
            }
        }
    </style>
</head>

<body>
    <!-- Global Animated Background -->
    <div class="global-bg"></div>

    <!-- Header -->
    <header>
        <div class="logo">
            <img src="kllovr_logo.png" alt="Kllover Wear Logo" style="height: 80px; vertical-align: middle;">
        </div>
        <nav>
            <ul>
                <li><a href="#hero">Home</a></li>
                <li><a href="#products">Collection</a></li>
                <li><a href="#order">Commander</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="hero" class="hero">
        <div class="hero-content">
            <h1>KLLOVR WEAR</h1>
            <p></p>
            <a href="#products" class="btn">Voir la Collection</a>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="products">
        <h2 class="section-title">Featured Collection</h2>
        <div class="product-grid">
            <!-- Product 6 (Polo shirt zip up) -->
            <div class="product-card" onclick="openProductDetail('Polo shirt zip up', 3300, 'carousel-product-6')">
                <div class="product-image" style="padding: 0; background-color: white;">
                    <div class="carousel-container" id="carousel-product-6">
                        <div class="carousel-slides" onscroll="updateDots('carousel-product-6')">
                            <div class="carousel-slide">
                                <img src="polo_zip_1.jpg" alt="Polo shirt zip up 1" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="polo_zip_2.jpg" alt="Polo shirt zip up 2" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="polo_zip_3.jpg" alt="Polo shirt zip up 3" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="polo_zip_4.jpg" alt="Polo shirt zip up 4" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                        </div>
                        <div class="carousel-dots">
                            <div class="dot active" onclick="scrollToSlide('carousel-product-6', 0)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-6', 1)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-6', 2)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-6', 3)"></div>
                        </div>
                        <button class="carousel-btn prev" onclick="changeSlide('carousel-product-6', -1)"><i class="fa-solid fa-chevron-left"></i></button>
                        <button class="carousel-btn next" onclick="changeSlide('carousel-product-6', 1)"><i class="fa-solid fa-chevron-right"></i></button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-title-row">
                        <h3 class="product-title">Polo shirt zip up</h3>
                        <div class="color-selector">
                            <div class="color-btn darkblue active" onclick="selectColor('carousel-product-6', 'darkblue', 0)" title="Dark Blue"></div>
                            <div class="color-btn black" onclick="selectColor('carousel-product-6', 'black', 1)" title="Black"></div>
                        </div>
                    </div>
                    <p class="product-price">3300.00DA</p>
                    <button class="btn-order" onclick="selectProduct('Polo shirt zip up', 3300)">Order This</button>
                </div>
            </div>
            <!-- Product 5 (Nike Ensemble) -->
            <div class="product-card" onclick="openProductDetail('Ensemble nike', 4800, 'carousel-product-5')">
                <div class="product-image" style="padding: 0; background-color: white;">
                    <div class="carousel-container" id="carousel-product-5">
                        <div class="carousel-slides" onscroll="updateDots('carousel-product-5')">
                            <div class="carousel-slide">
                                <img src="nike_ensemble_1.jpg" alt="Ensemble nike 1" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="nike_ensemble_2.jpg" alt="Ensemble nike 2" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="nike_ensemble_3.jpg" alt="Ensemble nike 3" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="nike_ensemble_4.jpg" alt="Ensemble nike 4" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="nike_ensemble_5.jpg" alt="Ensemble nike 5" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="nike_ensemble_6.jpg" alt="Ensemble nike 6" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="nike_ensemble_7.jpg" alt="Ensemble nike 7" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                        </div>
                        <div class="carousel-dots">
                            <div class="dot active" onclick="scrollToSlide('carousel-product-5', 0)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-5', 1)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-5', 2)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-5', 3)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-5', 4)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-5', 5)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-5', 6)"></div>
                        </div>
                        <button class="carousel-btn prev" onclick="changeSlide('carousel-product-5', -1)"><i class="fa-solid fa-chevron-left"></i></button>
                        <button class="carousel-btn next" onclick="changeSlide('carousel-product-5', 1)"><i class="fa-solid fa-chevron-right"></i></button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-title-row">
                        <h3 class="product-title">Ensemble nike</h3>
                        <div class="color-selector">
                            <div class="color-btn black active" onclick="selectColor('carousel-product-5', 'black', 0)" title="Black"></div>
                            <div class="color-btn grey" onclick="selectColor('carousel-product-5', 'grey', 4)" title="Grey"></div>
                        </div>
                    </div>
                    <p class="product-price">4800.00DA</p>
                    <button class="btn-order" onclick="selectProduct('Ensemble nike', 4800)">Order This</button>
                </div>
            </div>
            <!-- Product 1 -->
            <div class="product-card" onclick="openProductDetail('Stussy Ensemble', 5000, 'carousel-product-1')">
                <div class="product-image" id="carousel-product-1">
                    <div class="carousel-slides">
                        <div class="carousel-slide">
                            <img src="stussy_bkrz.jpg" alt="Stussy BKRZ Ensemble" onclick="openLightbox(event, this)">
                        </div>
                    </div>
                    <div class="color-selector" style="display:none"><div class="color-btn black"></div></div>
                </div>
                <div class="product-info">
                    <h3 class="product-title">Stussy Ensemble</h3>
                    <p class="product-price">5000.00DA</p>
                    <button class="btn-order" onclick="selectProduct('Stussy Ensemble', 5000)">Order This</button>
                </div>
            </div>

            <!-- Product 3 -->
            <div class="product-card" onclick="openProductDetail('Ralph lauren sweet shirt', 2600, 'carousel-product-3')">
                <div class="product-image" style="padding: 0; background-color: white;">
                    <div class="carousel-container" id="carousel-product-3">
                        <div class="carousel-slides" onscroll="updateDots('carousel-product-3')">
                            <div class="carousel-slide">
                                <img src="ralph_sweatshirt_1.jpg" alt="Ralph Lauren Sweatshirt - Back View Black" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="ralph_sweatshirt_2.jpg" alt="Ralph Lauren Sweatshirt - Front View Black" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="ralph_sweatshirt_3.jpg" alt="Ralph Lauren Sweatshirt - Detail Black" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="ralph_sweatshirt_4.jpg" alt="Ralph Lauren Sweatshirt - Back View Grey" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="ralph_sweatshirt_5.jpg" alt="Ralph Lauren Sweatshirt - Front View Grey" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                            <div class="carousel-slide">
                                <img src="ralph_sweatshirt_6.jpg" alt="Ralph Lauren Sweatshirt - Detail Grey" draggable="false" onclick="openLightbox(event, this)">
                            </div>
                        </div>
                        <div class="carousel-dots">
                            <div class="dot active" onclick="scrollToSlide('carousel-product-3', 0)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-3', 1)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-3', 2)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-3', 3)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-3', 4)"></div>
                            <div class="dot" onclick="scrollToSlide('carousel-product-3', 5)"></div>
                        </div>
                        <button class="carousel-btn prev" onclick="changeSlide('carousel-product-3', -1)"><i class="fa-solid fa-chevron-left"></i></button>
                        <button class="carousel-btn next" onclick="changeSlide('carousel-product-3', 1)"><i class="fa-solid fa-chevron-right"></i></button>
                    </div>
                </div>
                <div class="product-info">
                    <div class="product-title-row">
                        <h3 class="product-title">Ralph lauren sweet shirt</h3>
                        <div class="color-selector">
                            <div class="color-btn black active" onclick="selectColor('carousel-product-3', 'black', 0)" title="Black"></div>
                            <div class="color-btn grey" onclick="selectColor('carousel-product-3', 'grey', 3)" title="Grey"></div>
                        </div>
                    </div>
                    <p class="product-price">2600.00DA</p>
                    <button class="btn-order" onclick="selectProduct('Ralph lauren sweet shirt', 2600)">Order This</button>
                </div>
            </div>
            <!-- Product 4 -->
            <div class="product-card" onclick="openProductDetail('Algeria Shirt', 2950, 'carousel-product-4')">
                <div class="product-image" id="carousel-product-4">
                    <div class="carousel-slides">
                        <div class="carousel-slide">
                            <img src="OS FOOT DZ sur TikTok.jpg" alt="Algeria Shirt" onclick="openLightbox(event, this)">
                        </div>
                    </div>
                    <div class="color-selector" style="display:none"><div class="color-btn white"></div></div>
                </div>
                <div class="product-info">
                    <h3 class="product-title">Algeria Shirt</h3>
                    <p class="product-price">2950.00DA</p>
                    <button class="btn-order" onclick="selectProduct('Algeria Shirt', 2950)">Order This</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Order Form Section -->
    <section id="order" class="order-section">
        <h2 class="section-title" style="text-align: center;">Passer votre commande</h2>
        <div class="order-container">
            <form id="orderForm" onsubmit="handleOrder(event)">
                <input type="hidden" id="date" name="date">
                <div class="form-group">
                    <label for="product"><strong>Choisir un produit</strong></label>
                    <input type="text" id="product" name="product" placeholder="Produit sélectionné" readonly required>
                </div>

                <div class="form-group">
                    <label for="name"><strong>Nom et Prenom</strong></label>
                    <input type="text" id="name" name="name" placeholder="xxxxxxxxxxx" required>
                </div>

                <div class="form-group">
                    <label for="instagram"><strong>Compte Instagram</strong></label>
                    <input type="text" id="instagram" name="instagram" placeholder="@votre_instagram">
                </div>

                <div class="form-group">
                    <label for="size"><strong>Taille / Size</strong></label>
                    <select id="size" name="size" required>
                        <option value="" disabled selected>Select your size</option>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="phone"><samp><strong>Numero de telephone</strong></samp></label>
                    <input type="tel" id="phone" name="phone" placeholder="+213 000 000 000" required>
                </div>
                <div class="form-group">
                    <label for="delivery_type"><strong> Bureau ou a domicile </strong></label>
                    <select id="delivery_type" name="delivery_type" onchange="calculateTotal()"> 
                        <option value="Bureau">Bureau (Stop Desk)</option>
                        <option value="Domicile">Domicile (Home)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="wilaya"><samp><strong>Wilaya</strong></samp></label>
                    <select id="wilaya" name="wilaya" required onchange="calculateTotal()">
                        <option value="" disabled selected>Select your Wilaya</option>
                        <option value="Adrar">01 - Adrar</option>
                        <option value="Chlef">02 - Chlef</option>
                        <option value="Laghouat">03 - Laghouat</option>
                        <option value="Oum El Bouaghi">04 - Oum El Bouaghi</option>
                        <option value="Batna">05 - Batna</option>
                        <option value="Béjaïa">06 - Béjaïa</option>
                        <option value="Biskra">07 - Biskra</option>
                        <option value="Béchar">08 - Béchar</option>
                        <option value="Blida">09 - Blida</option>
                        <option value="Bouira">10 - Bouira</option>
                        <option value="Tamanrasset">11 - Tamanrasset</option>
                        <option value="Tébessa">12 - Tébessa</option>
                        <option value="Tlemcen">13 - Tlemcen</option>
                        <option value="Tiaret">14 - Tiaret</option>
                        <option value="Tizi Ouzou">15 - Tizi Ouzou</option>
                        <option value="Alger">16 - Alger</option>
                        <option value="Djelfa">17 - Djelfa</option>
                        <option value="Jijel">18 - Jijel</option>
                        <option value="Sétif">19 - Sétif</option>
                        <option value="Saïda">20 - Saïda</option>
                        <option value="Skikda">21 - Skikda</option>
                        <option value="Sidi Bel Abbès">22 - Sidi Bel Abbès</option>
                        <option value="Annaba">23 - Annaba</option>
                        <option value="Guelma">24 - Guelma</option>
                        <option value="Constantine">25 - Constantine</option>
                        <option value="Médéa">26 - Médéa</option>
                        <option value="Mostaganem">27 - Mostaganem</option>
                        <option value="M'Sila">28 - M'Sila</option>
                        <option value="Mascara">29 - Mascara</option>
                        <option value="Ouargla">30 - Ouargla</option>
                        <option value="Oran">31 - Oran</option>
                        <option value="El Bayadh">32 - El Bayadh</option>
                        <option value="Illizi">33 - Illizi</option>
                        <option value="Bordj Bou Arréridj">34 - Bordj Bou Arréridj</option>
                        <option value="Boumerdès">35 - Boumerdès</option>
                        <option value="El Tarf">36 - El Tarf</option>
                        <option value="Tindouf">37 - Tindouf</option>
                        <option value="Tissemsilt">38 - Tissemsilt</option>
                        <option value="El Oued">39 - El Oued</option>
                        <option value="Khenchela">40 - Khenchela</option>
                        <option value="Souk Ahras">41 - Souk Ahras</option>
                        <option value="Tipaza">42 - Tipaza</option>
                        <option value="Mila">43 - Mila</option>
                        <option value="Aïn Defla">44 - Aïn Defla</option>
                        <option value="Naâma">45 - Naâma</option>
                        <option value="Aïn Témouchent">46 - Aïn Témouchent</option>
                        <option value="Ghardaïa">47 - Ghardaïa</option>
                        <option value="Relizane">48 - Relizane</option>
                        <option value="Timimoun">49 - Timimoun</option>
                        <option value="Bordj Badji Mokhtar">50 - Bordj Badji Mokhtar</option>
                        <option value="Ouled Djellal">51 - Ouled Djellal</option>
                        <option value="Béni Abbès">52 - Béni Abbès</option>
                        <option value="In Salah">53 - In Salah</option>
                        <option value="In Guezzam">54 - In Guezzam</option>
                        <option value="Touggourt">55 - Touggourt</option>
                        <option value="Djanet">56 - Djanet</option>
                        <option value="El M'Ghair">57 - El M'Ghair</option>
                        <option value="El Meniaa">58 - El Meniaa</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="city"><strong>Ville</strong></label>
                    <input type="text" id="city" name="city" placeholder="Bab Ezzouar" required>
                </div>

                <div class="form-group">
                    <label for="quantity"><strong>Quantity</strong></label>
                    <input type="number" id="quantity" name="quantity" min="1" value="1" onchange="calculateTotal()">
                </div>

                <div class="form-group" style="display: flex; gap: 10px;">
                    <div style="flex: 1;">
                        <label for="price"><strong>Prix (DA)</strong></label>
                        <input type="number" id="price" name="price" readonly required>
                    </div>
                    <div style="flex: 1;">
                         <label for="delivery_cost"><strong>Livraison (DA)</strong></label>
                         <input type="number" id="delivery_cost" name="delivery_cost" readonly>
                    </div>
                </div>

                <div class="form-group">
                    <label for="total"><strong>Total (DA)</strong></label>
                    <input type="number" id="total" name="total" readonly style="font-weight: bold; color: var(--primary-color); font-size: 1.2rem;">
                </div>

                <button type="submit" class="btn"
                    style="width: 100%; background-color: var(--primary-color); color: white;">Confirm Order</button>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <p>&copy; 2026 KLLOVR WEAR</p>
    </footer>

    <!-- Product Detail Modal -->
    <div id="productDetailModal" class="product-modal">
        <div class="close-product-modal" onclick="closeProductDetail()">&times;</div>
        <div class="product-modal-content">
            <div class="modal-product-visuals">
                <div class="carousel-container" id="modal-carousel">
                    <div class="carousel-slides">
                        <!-- Slides injected by JS -->
                    </div>
                    <div class="carousel-dots">
                        <!-- Dots injected by JS -->
                    </div>
                    <button class="carousel-btn prev" onclick="changeSlide('modal-carousel', -1)"><i class="fa-solid fa-chevron-left"></i></button>
                    <button class="carousel-btn next" onclick="changeSlide('modal-carousel', 1)"><i class="fa-solid fa-chevron-right"></i></button>
                </div>
            </div>
            <div class="modal-product-info">
                <h2 id="modal-title">Product Name</h2>
                <p class="modal-product-price" id="modal-price">0.00DA</p>
                
                <span class="modal-section-label">Couleurs Disponibles</span>
                <div class="color-selector" id="modal-colors" style="margin-left: 0; margin-bottom: 30px;">
                    <!-- Color buttons injected by JS -->
                </div>

                <span class="modal-section-label">Sélectionner la Taille</span>
                <div class="size-selector" id="modal-sizes">
                    <button class="size-btn" onclick="selectSize(this)">S</button>
                    <button class="size-btn active" onclick="selectSize(this)">M</button>
                    <button class="size-btn" onclick="selectSize(this)">L</button>
                    <button class="size-btn" onclick="selectSize(this)">XL</button>
                    <button class="size-btn" onclick="selectSize(this)">XXL</button>
                </div>

                <button class="modal-commander-btn" onclick="confirmProductDetail()">COMMANDER MAINTENANT</button>
            </div>
        </div>
    </div>

    <!-- Lightbox for viewing images full screen -->
    <div id="lightbox" onclick="if(event.target === this) closeLightbox()">
        <button class="lightbox-btn prev" onclick="navigateLightbox(-1)"><i class="fa-solid fa-chevron-left"></i></button>
        <img id="lightbox-img" src="" alt="Zoomed view">
        <button class="lightbox-btn next" onclick="navigateLightbox(1)"><i class="fa-solid fa-chevron-right"></i></button>
    </div>

    <!-- Order Confirmation Modal -->
    <div id="confirmationModal" class="modal">
        <div class="modal-content">
            <i class="fa-solid fa-check-circle"></i>
            <h3>Order Received!</h3>
            <p id="modalMessage">Thank you for your order. We will contact you shortly to confirm shipping details.</p>
            <button class="close-btn" onclick="closeModal()">Close</button>
        </div>
    </div>

    <script>
        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Product selection logic
        function selectProduct(productName, price) {
            const productInput = document.getElementById('product');
            const priceInput = document.getElementById('price');
            
            productInput.value = productName;
            priceInput.value = price;
            
            calculateTotal();
            
            // Scroll to order form
            document.getElementById('order').scrollIntoView({ behavior: 'smooth' });
        }

        // Shipping Rates Database (Wilaya: {domicile: price, bureau: price})
        const shippingRates = {
            "Adrar": { home: 1100, desk: 600 },
            "Chlef": { home: 700, desk: 400 },
            "Laghouat": { home: 900, desk: 500 },
            "Oum El Bouaghi": { home: 800, desk: 400 },
            "Batna": { home: 800, desk: 400 },
            "Béjaïa": { home: 700, desk: 400 },
            "Biskra": { home: 900, desk: 500 },
            "Béchar": { home: 1100, desk: 600 },
            "Blida": { home: 500, desk: 250 },
            "Bouira": { home: 650, desk: 400 },
            "Tamanrasset": { home: 1300, desk: 800 },
            "Tébessa": { home: 800, desk: 500 },
            "Tlemcen": { home: 800, desk: 400 },
            "Tiaret": { home: 800, desk: 400 },
            "Tizi Ouzou": { home: 650, desk: 400 },
            "Alger": { home: 400, desk: 200 },
            "Djelfa": { home: 900, desk: 500 },
            "Jijel": { home: 700, desk: 400 },
            "Sétif": { home: 700, desk: 400 },
            "Saïda": { home: 800, desk: 400 },
            "Skikda": { home: 700, desk: 400 },
            "Sidi Bel Abbès": { home: 700, desk: 400 },
            "Annaba": { home: 700, desk: 400 },
            "Guelma": { home: 800, desk: 400 },
            "Constantine": { home: 700, desk: 400 },
            "Médéa": { home: 600, desk: 400 },
            "Mostaganem": { home: 700, desk: 400 },
            "M'Sila": { home: 800, desk: 500 },
            "Mascara": { home: 700, desk: 400 },
            "Ouargla": { home: 1000, desk: 500 },
            "Oran": { home: 700, desk: 400 },
            "El Bayadh": { home: 1000, desk: 500 },
            "Illizi": { home: 1300, desk: 600 },
            "Bordj Bou Arréridj": { home: 700, desk: 400 },
            "Boumerdès": { home: 600, desk: 350 },
            "El Tarf": { home: 800, desk: 400 },
            "Tindouf": { home: 1300, desk: 600 },
            "Tissemsilt": { home: 800, desk: 400 },
            "El Oued": { home: 900, desk: 500 },
            "Khenchela": { home: 800, desk: 500 },
            "Souk Ahras": { home: 800, desk: 500 },
            "Tipaza": { home: 600, desk: 350 },
            "Mila": { home: 700, desk: 400 },
            "Aïn Defla": { home: 600, desk: 400 },
            "Naâma": { home: 1000, desk: 500 },
            "Aïn Témouchent": { home: 700, desk: 400 },
            "Ghardaïa": { home: 1000, desk: 500 },
            "Relizane": { home: 700, desk: 400 },
            "Timimoun": { home: 1300, desk: 600 },
            "Bordj Badji Mokhtar": { home: 900, desk: 0 },
            "Ouled Djellal": { home: 900, desk: 0 },
            "Béni Abbès": { home: 1300, desk: 0 },
            "In Salah": { home: 1300, desk: 600 },
            "In Guezzam": { home: 900, desk: 0 },
            "Touggourt": { home: 900, desk: 0 },
            "Djanet": { home: 900, desk: 0 },
            "El M'Ghair": { home: 1000, desk: 500 },
            "El Meniaa": { home: 1000, desk: 500 }
        };

        function calculateTotal() {
            const price = parseFloat(document.getElementById('price').value) || 0;
            const quantity = parseInt(document.getElementById('quantity').value) || 1;
            const wilaya = document.getElementById('wilaya').value;
            const type = document.getElementById('delivery_type').value;
            
            let deliveryCost = 0;
            
            if (wilaya && shippingRates[wilaya]) {
                if (type === 'Bureau') {
                    deliveryCost = shippingRates[wilaya].desk;
                } else {
                    deliveryCost = shippingRates[wilaya].home;
                }
            }
            
            const total = (price * quantity) + deliveryCost;
            
            document.getElementById('delivery_cost').value = deliveryCost;
            
            // Update Total Field
            const totalField = document.getElementById('total');
            if(totalField) totalField.value = total;
            
            const btn = document.querySelector('.btn[type="submit"]');
            btn.innerHTML = `Confirm Order`;
        }

        // Form handling
        async function handleOrder(e) {
            e.preventDefault();
            
            const scriptURL = 'https://script.google.com/macros/s/AKfycbxbD2vbBSchToGNh3mAVvP-T5HXg9314BFA8oC0yTH5c2eH0jm7GdJP5h5qMKG5ep4u/exec';
            const form = document.getElementById('orderForm');
            const submitBtn = form.querySelector('button[type="submit"]');
            
            // Set date
            document.getElementById('date').value = new Date().toLocaleString();

            // Disable button and show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> Processing...';

            try {
                // Convert FormData to URLSearchParams for better compatibility with Google Apps Script
                const formData = new FormData(form);
                const params = new URLSearchParams();
                for (const [key, value] of formData.entries()) {
                    params.append(key, value);
                }

                // Use fetch with a fallback for CORS redirect issues common with Google Apps Script
                await fetch(scriptURL, { 
                    method: 'POST', 
                    body: params,
                    mode: 'no-cors' // This avoids CORS errors when GAS redirects
                });

                // Since we use 'no-cors', we can't read the response, but if fetch didn't throw,
                // the data was likely sent to the script successfully.
                const modal = document.getElementById('confirmationModal');
                const productName = document.getElementById('product').value;
                const message = document.getElementById('modalMessage');
                message.textContent = `Thank you for ordering ${productName}. We will contact you shortly to confirm shipping details.`;
                modal.style.display = 'flex';
                form.reset();

            } catch (error) {
                console.error('Submission Error:', error);
                alert('Connection error. Please check your internet and try again.');
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Confirm Order';
            }
            
            console.log("Order submission sequence finished");
        }

        function closeModal() {
            document.getElementById('confirmationModal').style.display = 'none';
            document.getElementById('orderForm').reset();
        }

        // Close modal if clicked outside
        window.onclick = function (event) {
            const modal = document.getElementById('confirmationModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Carousel Logic
        function scrollToSlide(carouselId, index) {
            const container = document.querySelector(`#${carouselId} .carousel-slides`);
            const slideWidth = container.clientWidth;
            container.scrollTo({
                left: slideWidth * index,
                behavior: 'smooth'
            });
            // UI update happens via onscroll event
        }

        function updateDots(carouselId) {
            const container = document.querySelector(`#${carouselId} .carousel-slides`);
            const slideWidth = container.clientWidth;
            // Calculate current index
            const index = Math.round(container.scrollLeft / slideWidth);
            
            const dots = document.querySelectorAll(`#${carouselId} .dot`);
            dots.forEach((dot, i) => {
                if (i === index) dot.classList.add('active');
                else dot.classList.remove('active');
            });
        }

        function changeSlide(carouselId, direction) {
            const container = document.querySelector(`#${carouselId} .carousel-slides`);
            const slideWidth = container.clientWidth;
            const currentScroll = container.scrollLeft;
            const newScroll = currentScroll + (direction * slideWidth);
            
            container.scrollTo({
                left: newScroll,
                behavior: 'smooth'
            });
        }

        // Product Detail Modal Logic
        let currentProductData = {};

        function openProductDetail(name, price, carouselId, colors) {
            currentProductData = { name, price, carouselId };
            
            // Populate basic info
            document.getElementById('modal-title').innerText = name;
            document.getElementById('modal-price').innerText = price + "DA";
            
            // Clone slides from original carousel
            const originalSlides = document.querySelector(`#${carouselId} .carousel-slides`).innerHTML;
            document.querySelector('#modal-carousel .carousel-slides').innerHTML = originalSlides;
            
            // Re-initialize dots for modal carousel
            const slideCount = document.querySelectorAll(`#modal-carousel .carousel-slide`).length;
            let dotsHtml = '';
            for(let i=0; i<slideCount; i++) {
                dotsHtml += `<div class="dot ${i===0?'active':''}" onclick="scrollToSlide('modal-carousel', ${i})"></div>`;
            }
            document.querySelector('#modal-carousel .carousel-dots').innerHTML = dotsHtml;
            
            // Clear and inject color buttons
            const originalColors = document.querySelector(`#${carouselId}`).parentElement.querySelector('.color-selector').innerHTML;
            const modalColors = document.getElementById('modal-colors');
            modalColors.innerHTML = originalColors;
            
            // Update onclicks in modal color buttons to target modal-carousel
            const btns = modalColors.querySelectorAll('.color-btn');
            btns.forEach(btn => {
                const originalOnClick = btn.getAttribute('onclick');
                const newOnClick = originalOnClick.replace(carouselId, 'modal-carousel');
                btn.setAttribute('onclick', newOnClick);
            });

            document.getElementById('productDetailModal').style.display = 'block';
            document.body.style.overflow = 'hidden'; // Prevent scroll
            
            // Reset modal carousel scroll
            document.querySelector('#modal-carousel .carousel-slides').scrollLeft = 0;
        }

        function closeProductDetail() {
            document.getElementById('productDetailModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function selectSize(btn) {
            document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            
            // Update the form size selector if hidden or visible
            const sizeValue = btn.innerText;
            document.getElementById('size').value = sizeValue;
        }

        function confirmProductDetail() {
            // Select product in the order form
            selectProduct(currentProductData.name, currentProductData.price);
            closeProductDetail();
            
            // Sync the selected size to the main form
            const activeSize = document.querySelector('.size-btn.active').innerText;
            document.getElementById('size').value = activeSize;
            
            // Smooth scroll to order section
            document.getElementById('order').scrollIntoView({ behavior: 'smooth' });
        }

        // Lightbox Logic
        let lightboxImages = [];
        let currentLightboxIndex = 0;

        function openLightbox(event, imgElement) {
            // Find all images in the same carousel
            const carousel = imgElement.closest('.carousel-slides');
            if (carousel) {
                const imgs = Array.from(carousel.querySelectorAll('img'));
                lightboxImages = imgs.map(img => img.src);
                currentLightboxIndex = imgs.indexOf(imgElement);
            } else {
                // For single images outside carousels
                const parent = imgElement.parentElement;
                const imgs = Array.from(parent.querySelectorAll('img'));
                if (imgs.length > 1) {
                    lightboxImages = imgs.map(img => img.src);
                    currentLightboxIndex = imgs.indexOf(imgElement);
                } else {
                    lightboxImages = [imgElement.src];
                    currentLightboxIndex = 0;
                }
            }
            
            updateLightboxImage();
            
            const lightbox = document.getElementById('lightbox');
            lightbox.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            
            if(event) event.stopPropagation();
        }

        function updateLightboxImage() {
            const img = document.getElementById('lightbox-img');
            img.style.opacity = '0';
            setTimeout(() => {
                img.src = lightboxImages[currentLightboxIndex];
                img.style.opacity = '1';
            }, 150);
            
            // Show/hide buttons if needed (only if more than 1 image)
            const btns = document.querySelectorAll('.lightbox-btn');
            btns.forEach(btn => btn.style.display = lightboxImages.length > 1 ? 'flex' : 'none');
        }

        function navigateLightbox(direction) {
            currentLightboxIndex += direction;
            if (currentLightboxIndex >= lightboxImages.length) currentLightboxIndex = 0;
            if (currentLightboxIndex < 0) currentLightboxIndex = lightboxImages.length - 1;
            updateLightboxImage();
        }

        function closeLightbox() {
            document.getElementById('lightbox').style.display = 'none';
            // Only restore scroll if the product modal isn't also open
            if (document.getElementById('productDetailModal').style.display !== 'block') {
                document.body.style.overflow = 'auto';
            }
        }

        // Color Selection Function
        function selectColor(carouselId, colorName, startSlideIndex) {
            // Scroll to the first slide of the selected color
            scrollToSlide(carouselId, startSlideIndex);
            
            // Update active state of color buttons
            const carousel = document.getElementById(carouselId);
            const colorButtons = carousel.parentElement.querySelectorAll('.color-btn');
            
            colorButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.classList.contains(colorName)) {
                    btn.classList.add('active');
                }
            });
        }
    </script>
</body>

</html>